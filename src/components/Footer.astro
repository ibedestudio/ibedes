---
import { GLOBAL } from "../lib/variables";
import Anchor from "./common/Anchor.astro";
import Section from "./common/Section.astro";

const date = new Date();
const year = date.getFullYear();

const allLinks = [
  ...Object.entries(GLOBAL.menu),
  ...(GLOBAL.footerMenu ? Object.entries(GLOBAL.footerMenu) : []),
  ["Design System", "/design-system"],
];
---

<footer class="mt-24 mb-8">
  <Section>
    <div class="border-t-[3px] border-black/60 dark:border-white/70 pt-8">
      <!-- Main Content -->
      <div
        class="flex flex-col md:flex-row justify-between items-start md:items-center gap-8 mb-8"
      >
        <!-- Brand & Social -->
        <div class="flex flex-col gap-4">
          <h2 class="font-display text-lg uppercase tracking-wider">
            {GLOBAL.username}
          </h2>
          <div class="flex gap-4">
          {
            GLOBAL.githubProfile && (
              <a
                href={GLOBAL.githubProfile}
                target="_blank"
                rel="noopener noreferrer"
                class="touch-target--icon text-xl hover:text-primary transition-colors"
                aria-label="GitHub"
              >
                <i class="fa-brands fa-github" />
              </a>
            )
          }
          {
            GLOBAL.threadsProfile && (
              <a
                href={GLOBAL.threadsProfile}
                target="_blank"
                rel="noopener noreferrer"
                class="touch-target--icon text-xl hover:text-primary transition-colors"
                aria-label="Threads"
              >
                <i class="fa-brands fa-threads" />
              </a>
            )
          }
          <a
            href={`mailto:${GLOBAL.contactEmail}`}
            class="touch-target--icon text-xl hover:text-primary transition-colors"
            aria-label="Email"
          >
            <i class="fa-solid fa-envelope"></i>
          </a>
        </div>
        </div>

        <!-- Navigation Links -->
        <nav class="flex flex-wrap gap-x-6 gap-y-2 text-sm font-mono">
          {
            allLinks.map(([name, url]) => (
              <Anchor
                url={url}
                class="touch-target text-muted-foreground hover:text-foreground transition-colors no-underline uppercase tracking-wide"
              >
                {name}
              </Anchor>
            ))
          }
        </nav>
      </div>

      <!-- Bottom Bar -->
      <div
        class="flex flex-col md:flex-row justify-between items-center gap-4 pt-6 border-t-2 border-black/20 dark:border-white/20"
      >
        <p
          class="text-xs text-muted-foreground font-mono uppercase tracking-wider"
        >
          &copy; {year}
          {GLOBAL.username}
        </p>

        <div
          class="flex items-center gap-2 text-xs text-muted-foreground italic font-serif"
        >
          <i class="fa-solid fa-quote-left opacity-50"></i>
          <span
            id="quote"
            class="max-w-xs md:max-w-md text-center md:text-right"
            >Keep building, stay curious.</span
          >
          <i class="fa-solid fa-quote-right opacity-50"></i>
        </div>
      </div>
    </div>
  </Section>
</footer>

<script>
  const quotes = [
    "Ilmu tanpa amal bagaikan pohon tanpa buah.",
    "Sabar adalah pakaian yang tidak pernah usang.",
    "Nilai seseorang sesuai dengan apa yang ia usahakan.",
    "Apa yang kamu cari, sebenarnya sedang mencari kamu.",
    "Diam adalah jawaban terbaik bagi orang bodoh.",
  ];

  const quoteElement = document.getElementById("quote");
  if (quoteElement) {
    const randomIndex = Math.floor(Math.random() * quotes.length);
    quoteElement.textContent = quotes[randomIndex];
  }
</script>
